!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):t.VueModalWizard=e(t.Vue)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={parseTimeToMillisecond:function(t){let e=t.match(/\d*\.?\d+/g);return e?(e=parseFloat(e.pop()),-1===t.indexOf("ms")?parseInt(`${1e3*e}`):parseInt(`${e}`)):0}};const o=new Set(["point","column","sticky-column","viewport"]);var i={data:()=>({visible:!1,showModal:!0,closeReady:!1,onClose:null,closeTopModal:null,contentComOpt:null,props:null,fadeDuration:200,colorChangeDuration:"0.2s",transition:null,lightboxColor:"rgba(0, 0, 0, 0.8)",lightboxTransitionProp:"",lightboxOpacity:"0",name:null}),methods:{recover(){this.alreadyClose=!1,this.showModal=!0,this.lightboxOpacity="0";let t=this.$refs.modalCom;t&&t._modalRecover&&"function"==typeof t._modalRecover&&t._modalRecover()},initStyle(t){let e=this.$refs.modalCom;e&&e._modalStyle&&"function"==typeof e._modalStyle?this.setStyle(e._modalStyle()):this.setStyle(t||{}),this.visible=!0;let o=this.$refs.anchorbox;(e=this.toArray(o.children).pop()).addEventListener("mousedown",t=>{t.stopPropagation(),this.closeReady=!1}),e.addEventListener("click",t=>{t.stopPropagation()})},setStyle(t){t.fadeDuration?this.fadeDuration=e.parseTimeToMillisecond(t.fadeDuration):this.fadeDuration=200,this.colorChangeDuration=t.colorChangeDuration||"0.2s",this.lightboxColor=t.lightboxColor||"rgba(0, 0, 0, 0.8)",this.transition=t.transition||null,this.lightboxTransitionProp=`opacity ${this.fadeDuration}ms, background-color ${this.colorChangeDuration}`,setTimeout(()=>{this.lightboxOpacity="1"},1)},initPosition(t){let e=this.$refs.modalCom;if(e&&e._modalFlexPosition&&"function"==typeof e._modalFlexPosition){this.ticking=!1;let t=()=>{this.setPosition(e._modalFlexPosition(window.innerWidth,window.innerHeight)),this.ticking=!1};t(),this.onResize=(()=>{this.ticking||(window.requestAnimationFrame(t),this.ticking=!0)}),window.addEventListener("resize",this.onResize)}else!t&&e&&e._modalPosition&&"function"==typeof e._modalPosition?this.setPosition(e._modalPosition()):this.setPosition(t||{})},setPosition(t){this.position=t,this.$nextTick(()=>{let e=this.$refs.anchorbox,i=this.toArray(e.children).pop();t.type&&o.has(t.type)||(t.type="point"),e.style.position="absolute",i.style.position="absolute",e.style.width="0",i.style.margin="0","point"===t.type&&(t.anchorTop?(e.style.top=t.anchorTop,e.style.bottom="auto"):(e.style.top=t.anchorBottom?"auto":"50%",e.style.bottom=t.anchorBottom||"auto"),t.top?(i.style.top=t.top,i.style.bottom="auto"):(i.style.top=t.bottom?"auto":`-${i.clientHeight/2}px`,i.style.bottom=t.bottom||"auto")),"viewport"!==t.type?(t.anchorLeft?(e.style.left=t.anchorLeft,e.style.right="auto"):(e.style.left=t.anchorRight?"auto":"50%",e.style.right=t.anchorRight||"auto"),t.left?(i.style.left=t.left,i.style.right="auto"):(i.style.left=t.right?"auto":`-${i.clientWidth/2}px`,i.style.right=t.right||"auto")):(e.style.top="0",e.style.bottom="0",e.style.left="0",e.style.right="0",i.style.top=t.top||"0",i.style.bottom=t.bottom||"0",i.style.left=t.left||"0",i.style.right=t.right||"0",e.style.width="auto"),"column"===t.type&&(i.style.position="relative",e.style.top="0",e.style.bottom="auto",i.style.top="auto",i.style.bottom="auto",i.style.margin=`${t.top||0} 0 ${t.bottom||0} ${t.right&&!t.left?-i.clientWidth:0}px`),"sticky-column"===t.type&&(e.style.top="0",e.style.bottom="0",i.style.top=t.top||"0",i.style.bottom=t.bottom||"0")})},reset(){this.setPosition(this.position)},close(){this.alreadyClose||(this.alreadyClose=!0,this.lightboxOpacity="0",this.visible=null===this.transition,this.closeTopModal(),this.onClose&&"function"==typeof this.onClose&&this.onClose(),setTimeout(()=>{"string"==typeof this.name?(this.showModal=!1,this.visible=!1):this.doDestroy()},this.fadeDuration))},doDestroy(){this.onResize&&window.removeEventListener("resize",this.onResize),this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},onColorChange(t){this.lightboxColor=t},toArray:t=>Array.prototype.slice.call(t)}};var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"ModalWizard__Modal"},[o("div",{ref:"lightbox",staticClass:"background",style:{backgroundColor:t.lightboxColor,transition:t.lightboxTransitionProp,opacity:t.lightboxOpacity},on:{mousedown:function(e){t.closeReady=!0},click:function(){t.closeReady&&t.close()}}},[o("div",{ref:"anchorbox",staticClass:"anchor-box"},[o("transition",{attrs:{name:t.transition}},[o(t.contentComOpt,t._b({directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],ref:"modalCom",tag:"component",on:{reset:t.reset,changeColor:t.onColorChange,changePosition:t.setPosition}},"component",t.props,!1))],1)],1)])])};function s(){const t=document.head||document.getElementsByTagName("head")[0],e=s.styles||(s.styles={}),o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,n){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;const s=o?n.media||"default":i,l=e[s]||(e[s]={ids:[],parts:[],element:void 0});if(!l.ids.includes(i)){let e=n.source,a=l.ids.length;if(l.ids.push(i),n.map&&(e+="\n/*# sourceURL="+n.map.sources[0]+" */",e+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),o&&(l.element=l.element||document.querySelector("style[data-group="+s+"]")),!l.element){const e=l.element=document.createElement("style");e.type="text/css",n.media&&e.setAttribute("media",n.media),o&&(e.setAttribute("data-group",s),e.setAttribute("data-next-index","0")),t.appendChild(e)}if(o&&(a=parseInt(l.element.getAttribute("data-next-index")),l.element.setAttribute("data-next-index",a+1)),l.element.styleSheet)l.parts.push(e),l.element.styleSheet.cssText=l.parts.filter(Boolean).join("\n");else{const t=document.createTextNode(e),o=l.element.childNodes;o[a]&&l.element.removeChild(o[a]),o.length?l.element.insertBefore(t,o[a]):l.element.appendChild(t)}}}}var l=function(t,e,o,i,n,s,l,a){const r=o||{};r.render||(r.render=t.render,r.staticRenderFns=t.staticRenderFns,r._compiled=!0,n&&(r.functional=!0)),r._scopeId=i;{let t;if(e&&(t=function(t){e.call(this,l(t))}),void 0!==t)if(r.functional){const e=r.render;r.render=function(o,i){return t.call(i),e(o,i)}}else{const e=r.beforeCreate;r.beforeCreate=e?[].concat(e,t):[t]}}return r}({render:n,staticRenderFns:[]},function(t){t&&t("data-v-58178d27_0",{source:"\n.ModalWizard__Modal{position:fixed\n}\n.ModalWizard__Modal>.background{position:fixed;top:0;left:0;height:100%;width:100%;overflow:auto\n}\n.ModalWizard__Modal>.background>.anchor-box{position:absolute;top:0;left:50%;width:0\n}",map:void 0,media:void 0})},void 0===i?{}:i,void 0,!1,0,s,"undefined"!=typeof __vue_create_injector_ssr__&&__vue_create_injector_ssr__);const a=t.extend(l),r=[],d={};let c=1,p=1010;function h(){r.pop(),p--,r.length<=0&&(document.body.style.overflow="auto",document.removeEventListener("keydown",u))}function u(t){27===(t=t||window.event).keyCode&&r.length>0&&!r[r.length-1].escOff&&r[r.length-1].close()}var m={openModal:function(t,e={}){if(null===t)return;let o=null,i=null,n=!0;if(e.name&&(o=d[e.name])&&(-1===r.indexOf(o)?n=!1:e.name=null),n){if("function"==typeof t)i={functional:!0,render:(e,o)=>t(e,o.props)};else if("string"==typeof t&&-1!==t.indexOf("<"))i={template:t},e.props&&"object"==typeof e.props&&(i.props=Object.keys(e.props));else{if("object"!=typeof t&&("string"!=typeof t||-1!==t.indexOf("<")))return;i=t}let n={};n.contentComOpt=i,n.closeTopModal=h,n.onClose=e.onClose,n.props=e.props,n.name=e.name,(o=new a({data:n})).id=`modal_${c++}`,o.vm=o.$mount(),document.body.appendChild(o.vm.$el),o.dom=o.vm.$el,e.name&&(d[e.name]=o)}else o.vm.props=e.props,o.recover();o.dom.style.zIndex=p++,o.vm.initStyle(e.style),o.vm.initPosition(e.position),e.escOff&&(o.escOff=!0),r.push(o),r.length<=1&&(document.body.style.overflow="hidden",document.addEventListener("keydown",u))},closeModal:function(){r.length>0&&r[r.length-1].close()},setInitZIndex:function(t){p=t}};return{install:function(t,e={}){e.zIndex&&m.setInitZIndex(zIndex),t.prototype[`$${e.openModalName||"openModal"}`]=m.openModal,t.prototype[`$${e.closeModalName||"closeModal"}`]=m.closeModal},openModal:m.openModal,closeModal:m.closeModal}});
